<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Games on graphs visualisation system</title>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css"></link>
    <link rel="stylesheet" href="assets/css/app.css"></link>
    <script src="assets/js/jquery-2.2.3.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/d3-queue.v2.min.js"></script>
    <script src="assets/js/d3.v3.min.js"></script>
    <script src="assets/js/download2.js"></script>
    <style>
      #navbar navbar-default {pointer-events: unset;}
    </style>
  </head>

  <body>
    <nav id="nav" class="navbar navbar-default">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Games on graphs</a>
        </div>

        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <!--reload-->
            <li><a href="#" onclick="game.clear_playground(); reload();">Reload</a></li>

            <!--clear dropdown-->
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Clear <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#" onclick="game.clear_playground()">Clear playground</a></li>
                <li><a href="#" onclick="clearCoalition()">Empty coalition selection</a></li>
              </ul>
            </li>

            <!--download dropdown-->
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Download <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#" onclick="io.download_graph();">Download graph as .json</a></li>
                <li><a href="#" onclick="io.download_game()">Download game as .json</a></li>
                <li><a href="#" onclick="io.download_log()">Download console log</a></li>
              </ul>
            </li>

            <!--upload dropdown-->
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Upload <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                <li><a href="#" data-toggle="modal" data-target="#upGraphModal">Upload directed graph as .json</a></li>
                <li><a href="#" data-toggle="modal" data-target="#upGameModal">Upload game as .json</a></li>
              </ul>
            </li>

            <!--display settings-->
            <li><a href="#" data-toggle="modal" data-target="#displayModal">Display settings</a></li>

          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="#" data-toggle="modal" data-target="#helpModal">Help</a></li>
          </ul>

          <ul class="nav navbar-nav navbar-right">
            <li><a href="#" data-toggle="modal" data-target="#generateGraph">Generate</a></li>
          </ul>


        </div>
      </div>
    </nav>

    <!-- generate graph modal -->
    <div id="generateGraph" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Generate graph</h4>
          </div>
          <div class="modal-body">
            <form class="form-horizontal">
              <fieldset>
                <legend>Generate a random graph</legend>
                <div class="form-group">
                  <label for="numnodes" class="col-lg-4 control-label">Number of nodes</label>
                  <div class="col-lg-8">
                    <input type="text" class="form-control" id="numnodes" placeholder="10">
                  </div>
                </div>
                <div class="form-group">
                  <label for="probedge" class="col-lg-4 control-label">Probability of edge</label>
                  <div class="col-lg-8">
                    <input type="text" class="form-control" id="probedge" placeholder="10">
                  </div>
                </div>
                <div class="form-group">
                  <label for="numstrat" class="col-lg-4 control-label">Number of strategies</label>
                  <div class="col-lg-8">
                    <input type="text" class="form-control" id="numstrat" placeholder="10">
                  </div>
                </div>
                <div class="form-group">
                  <div class="col-lg-10 col-lg-offset-2">
                    <button type="reset" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="submit" data-dismiss="modal" onclick="generate.generate()" class="btn btn-primary">Submit</button>
                  </div>
                </div>
              </fieldset>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div id="helpModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Help</h4>
          </div>
          <div class="modal-body">
            <table class="table table-striped table-hover ">
              <thead>
                <tr>
                  <th>Key/Action</th>
                  <th>Event</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>U</td>
                  <td>Toggle directed/undirected edge mode</td>
                </tr>
                <tr>
                  <td>C</td>
                  <td>Add/remove selected node to coalition selection</td>
                </tr>
                <tr>
                  <td>Backspace</td>
                  <td>Remove selected node or edge</td>
                </tr>
                <tr>
                  <td>ctrl + drag</td>
                  <td>Move node and fix in position</td>
                </tr>
                <tr>
                  <td>Doubleclick fixed node</td>
                  <td>Unfix node</td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- display settings modal -->
    <div id="displayModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Change display settings</h4>
          </div>
          <div class="modal-body">

            <form method="post" id="display-modal-form" class="form-horizontal">
              <fieldset>

                <div class="form-group">

                  <label for="select" class="col-lg-4 control-label">Playground width</label>
                  <div class="col-lg-5">
                    <input type="text" class="form-control" name="width" id="modal-width" placeholder='800'>
                  </div>

                  <label for="select" class="col-lg-4 control-label">Playground height</label>
                  <div class="col-lg-5">
                    <input type="text" class="form-control" name="height" id="modal-height" placeholder='600'>
                  </div>

                  <label for="select" class="col-lg-4 control-label">Node spread</label>
                  <div class="col-lg-5">
                    <input type="text" class="form-control" name="spread" id="modal-spread" placeholder='150'>
                  </div>

                </div>

                <div class="form-group">
                  <div class="col-lg-10 col-lg-offset-2">
                    <button type="reset" class="btn btn-default" data-dismiss="modal">Cancel</button>
                    <button type="submit" data-dismiss="modal" onclick="set_display()" class="btn btn-primary">Submit</button>
                  </div>
                </div>

              </fieldset>
            </form>
          </div>
          <div class="modal-footer">
          </div>
        </div>
      </div>
    </div>

    <!-- upload graph modal -->
    <div id="upGraphModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Upload graph as .json</h4>
          </div>
          <div class="modal-body">
            <form id      = "uploadGraph"
                  enctype = "multipart/form-data"
                  method  = "post"
                  action  = "/graph"
                  onsubmit = "io.upload_graph();"
            >
              <input type="file" name="graph"></input>
              <input type="submit">Submit</input>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <!-- upload game modal -->
    <div id="upGameModal" class="modal fade" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Upload game as .json</h4>
          </div>
          <div class="modal-body">
            <form id      = "uploadGame"
                  enctype = "multipart/form-data"
                  method  = "post"
                  action  = "/game"
                  onsubmit = "io.upload_game();"
            >
              <input type="file" name="game"></input>
              <input type="submit">Submit</input>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!--heading-->
      <h3>Playground</h3>

      <!--left column-->
      <div class="col-md-6">

        <!--top half of left column (panels)-->
        <div class="row">

          <!--overview panel (blue)-->
          <div class="col-md-4">
            <h5>Overview</h5>
            <table class="table table-striped table-hover ">
              <tbody>
                <tr class="info">
                  <td><em>Total nodes</em></td>
                  <td id="total-nodes"></td>
                </tr>
                <tr class="info">
                  <td><em>Total edges</em></td>
                  <td id="total-edges"></td>
                </tr>
                <tr class="info">
                  <td><em>Social welfare</em></td>
                  <td id="social-welfare"></td>
                </tr>
              </tbody>
            </table>
          </div>

          <!--selected node panel (green)-->
          <div class="col-md-4">
            <h5>Selected node</h5>
            <table class="table table-striped table-hover ">
              <tbody>
                <tr class="success">
                  <td><em>Node</em></td>
                  <td id="sel-node"></td>
                </tr>
                <tr class="success">
                  <td><em>Strategy</em></td>
                  <td id="sel-strat"></td>
                </tr>
                <tr class="success">
                  <td><em>Payoff</em></td>
                  <td id="sel-pay"></td>
                </tr>
              </tbody>
            </table>
          </div>

          <!--coalition panel (red)-->
          <div class="col-md-4">
            <h5>Coalition</h5>
            <table class="table table-striped table-hover ">
              <tbody>
                <tr class="danger">
                  <td><em>Size</em></td>
                  <td id="coal-size"></td>
                </tr>
                <tr class="danger">
                  <td><em>Nodes</em></td>
                  <td id="coal-nodes"></td>
                </tr>
                <tr class="danger">
                  <td><em>Payoff</em></td>
                  <td id="coal-pay"></td>
                </tr>
              </tbody>
            </table>
          </div>

        </div> <!--end of top half of left column-->

      <!--bottom half of left column (strategy selection)-->
        <div class="row">
          <div class="col-md-12">
            <div class="well well-sm">
              <ul id='select-strategy' class="breadcrumb">
                <ul class="select-status">
                  <a href="#" id="select-status-node" class="btn btn-warning btn-xs">No node selected</a>
                  <a href="#" id="select-status-undirected" class=" btn btn-info btn-xs">Directed edge mode</a>
                </ul>
              </ul>
            </div>
            <div class="well">
              <h5>Strategy selection</h5>
              <ul id='select-strategy-avail' class="breadcrumb">
                  <h5>Available:</h5>
                  </br>
                  <h5>Not available:</h5>
                  </br>
              </ul>
            </div>
          </div>
        </div>

      </div> <!--end of left column-->


      <!--right column, top-->
      <div class="row">

        <!--activity console-->
        <div class="col-md-6" style="min-height: 320px">
          <h5>Console</h5>
          <ul class="breadcrumb">
            <p id="console-5" class="text-console">></p>
            <p id="console-4" class="text-console">></p>
            <p id="console-3" class="text-console">></p>
            <p id="console-2" class="text-console">></p>
            <p id="console-1" class="text-console">></p>
            <p class="text-primary"><b id="console-0"></b></p>
          </ul>
        </div>

        <!--game control-->
        <div class="col-md-6">
          <h5>Game control (iterate best reponse)</h5>
          <ul class="breadcrumb">
            <div class="btn-group btn-group-justified">
              <a href="#s" class="btn btn-primary" onclick="cycle.best_response();">Selected node</a>
              <a href="#s" class="btn btn-warning" onclick="cycle.iter_node();">Iterate node by node</a>
            </div>
          </ul>

          <ul class="breadcrumb">
            <div class="btn-group btn-group-justified">
              <a href="#s" class="btn btn-danger" onclick="cycle.iter_coalition();">Coalition</a>
              <a href="#s" class="btn btn-info" onclick="cycle.iter_cycle();">Whole cycle</a>
              <a href="#s" class="btn btn-success" onclick="cycle.iter_nash();">Find Nash equilibrium</a>
            </div>
          </ul>
        </div>

      </div> <!--end of right column-->

      <!--playground-->
      <div class="row">
        <div class="col-md-12">
          <div class="panel panel-default">
            <div class="panel-heading">Interactive graph playground</div>
            <div id="pg" style="text-align:center;" class="panel-body">
            </div>
            <div id="pg-foot" class="panel-footer"></div>
          </div>
        </div>
      </div> <!--end of playground-->

    </div>  <!--end of container-->

  </body>
  <script src="views/io.js"></script>
  <script src="views/game.js"></script>
  <script src="views/cycle.js"></script>
  <script src="views/table.js"></script>
  <script src="views/generate.js"></script>
  <script src="views/app.js"></script>
</html>
